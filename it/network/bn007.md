# TCP确认机制

在TCP确认机制中，无法有效处理**非连续TCP片段**。确认号表明所有低于该编号的sequence number已经被发送该编号的设备接收。如果我们收到的字节数落在两个非连续的范围内，则无法只通过一个编号来确认。这可能导致潜在严重的性能问题，特别是高速或可靠性较差的网络。

## 未确认片段处理策略

### 仅重传超时片段
这是一种更加保守的方式，仅重传超时的片段，希望其他片段都能够成功接收。
### 重传所有片段
这是一种更激进或者说更悲观的方式。无论何时一个片段超时了，不仅重传该片段，还有所有其他尚未确认的片段。这一方式确保了任何时间都有一个等待确认的停顿时间，在所有未确认片段丢失的情况下，会刷新全部未确认片段，以使对端设备多一次接收机会。
## 选择确认
问题的关键在于无法确认非连续片段。

解决方式是对TCP滑动窗口算法进行扩展，添加允许设备分别确认非连续片段的功能。这一功能称为**选择确认（selective acknowledgment, SACK）**。